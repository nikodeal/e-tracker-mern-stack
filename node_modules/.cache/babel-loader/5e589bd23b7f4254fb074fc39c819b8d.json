{"ast":null,"code":"var _jsxFileName = \"/home/niko/Desktop/Mern/mern-stack/src/components/routes/CreateUser.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport axios from \"../../../client/node_modules/axios\";\nimport { AppContext } from \"../../AppContext\";\nimport { useHistory } from \"react-router-dom\";\n\nconst CreateUser = () => {\n  let history = useHistory();\n  const [error, displayError] = useState({\n    one: false,\n    two: false,\n    three: false,\n    four: false\n  });\n  const [msg1, dmsg1] = useState(\"\");\n  const [msg2, dmsg2] = useState(\"\");\n  const [msg3, dmsg3] = useState(\"\");\n  const [msg4, dmsg4] = useState(\"\");\n  const {\n    context,\n    setContext\n  } = useContext(AppContext);\n  const [validation, setValidation] = useState([]);\n  const [signUp, setSignUp] = useState({\n    firstname: \"\",\n    lastname: \"\",\n    email: \"\",\n    password: \"\"\n  });\n  const [toggleSignUp, setToggleSignUp] = useState(false);\n  const [toggleSignIn, setToggleSignIn] = useState(true);\n  const [signIn, setSignIn] = useState({\n    email: \"\",\n    password: \"\"\n  });\n\n  const handleSignUpChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setSignUp({ ...signUp,\n      [name]: value\n    });\n    dmsg1(\"\");\n    dmsg2(\"\");\n    dmsg3(\"\");\n    dmsg4(\"\");\n  };\n\n  const handleSignUpubmit = e => {\n    e.preventDefault();\n    const firstname = signUp.firstname.toLowerCase();\n    const lastname = signUp.lastname.toLowerCase();\n    const email = signUp.email;\n    const password = signUp.password;\n    let flag = true; // check first name\n\n    if (firstname.length < 3 || firstname.length === \"\" || firstname.length > 12) {\n      dmsg1(\"is not valid.\");\n      flag = false;\n    }\n\n    if (firstname) {\n      let counter1 = 0;\n\n      for (let i = 0; i < firstname.length; i++) {\n        if (Number(`${firstname[i]}`)) {\n          counter1++;\n        }\n      }\n\n      if (counter1 > 0) {\n        dmsg1(\"cannot contain a number.\");\n        flag = false;\n      }\n    } // check last name\n\n\n    if (lastname.length < 3 || lastname.length === \"\" || lastname.length > 12) {\n      dmsg2(\"is not valid.\");\n    }\n\n    if (lastname) {\n      let counter2 = 0;\n\n      for (let i = 0; i < lastname.length; i++) {\n        if (Number(`${lastname[i]}`)) {\n          counter2++;\n        }\n      }\n\n      if (counter2 > 0) {\n        dmsg2(\"cannot contain a number.\");\n        flag = false;\n      }\n    } // check email\n\n\n    if (email.length < 10 || email.length === \"\" || email.length > 25) {\n      dmsg3(\"is not valid.\");\n    }\n\n    if (email) {\n      let counter3 = 0;\n      let counter4 = 0;\n\n      if (!email.includes(\"@\")) {\n        counter3++;\n      }\n\n      if (!email.includes(\".\")) {\n        counter4++;\n      }\n\n      if (counter3 > 0) {\n        dmsg3(\"is missing ('@').\");\n        flag = false;\n      }\n\n      if (counter4 > 0) {\n        dmsg3(\"is missing ('.').\");\n        flag = false;\n      }\n    } // check password\n\n\n    if (password.length < 6 || password.length === \"\" || password.length > 20) {\n      dmsg4(\"is not valid.\");\n      flag = false;\n    }\n\n    if (password) {\n      let counter5 = 0;\n      let counter6 = 0;\n\n      for (let i = 0; i < password.length; i++) {\n        if (Number(`${password[i]}`)) {\n          counter5++;\n        }\n\n        if (password.includes(\" \")) {\n          counter6++;\n        }\n      }\n\n      if (counter5 === 0) {\n        dmsg4(\"must contain at least one number.\");\n        flag = false;\n      }\n\n      if (counter6 > 0) {\n        dmsg4(\"can not contain an empty space\");\n        flag = false;\n      }\n    }\n\n    if (flag === true) {\n      const user = {\n        firstname,\n        lastname,\n        email,\n        password\n      };\n      setToggleSignIn(true);\n      setToggleSignUp(false);\n      history.push('/');\n      axios.post(\"http://localhost:5000/users/add\", user).then(res => console.log(res.data));\n      return setSignUp({\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        password: \"\"\n      });\n    }\n  };\n\n  const handleSignInChange = e => {\n    displayError(false);\n    const {\n      name,\n      value\n    } = e.target;\n    setSignIn({ ...signIn,\n      [name]: value\n    });\n  };\n\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/users/\").then(res => {\n      setValidation(res.data);\n      console.log(res.data);\n    });\n    return () => {\n      console.log(\"cleared user list\");\n    };\n  }, []);\n\n  const handleSignInSubmit = e => {\n    e.preventDefault();\n    const email = signIn.email;\n    const password = signIn.password;\n\n    for (let i = 0; i < validation.length; i++) {\n      if (validation[i].email === email && validation[i].password === password) {\n        displayError(false);\n        setContext({\n          userLogged: validation[i].firstname,\n          isLogged: true\n        });\n        history.push(\"/\");\n        setSignIn({\n          email: \"\",\n          password: \"\"\n        });\n        break;\n      } else {\n        displayError(true);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 5\n    }\n  }, toggleSignIn && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"70%\",\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, \"New user\", \" \", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-sm btn-outline-success\",\n    onClick: () => {\n      setToggleSignIn(false);\n      setToggleSignUp(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, \"Sign up\"), \" \", \"now and enjoy Extremely's exercise tracker.\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSignInSubmit,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, \"Email:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    className: \"form-control\",\n    value: signIn.email,\n    onChange: handleSignInChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }, \"Password:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    className: \"form-control\",\n    value: signIn.password,\n    onChange: handleSignInChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Create\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 15\n    }\n  })))), toggleSignUp && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"70%\",\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 11\n    }\n  }, \"Already a user just\", \" \", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-sm btn-outline-warning\",\n    onClick: () => {\n      setToggleSignIn(true);\n      setToggleSignUp(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }, \"Sign in\"), \" \", \"now and enjoy Extremely's exercise tracker.\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 11\n    }\n  }, \"Create New User\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSignUpubmit,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }\n  }, \"Firstname:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"firstname\",\n    className: \"form-control\",\n    value: signUp.firstname,\n    onChange: handleSignUpChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 15\n    }\n  }), msg1 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 23\n    }\n  }, \"Firstname \", msg1) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }\n  }, \"Lastname:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"lastname\",\n    className: \"form-control\",\n    value: signUp.lastname,\n    onChange: handleSignUpChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 15\n    }\n  }), msg2 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 23\n    }\n  }, \"Lastname \", msg2) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }\n  }, \"Email:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    className: \"form-control\",\n    value: signUp.email,\n    onChange: handleSignUpChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 15\n    }\n  }), msg3 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 23\n    }\n  }, \"Email \", msg3) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 13\n    }\n  }, \"Password:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    className: \"form-control\",\n    value: signUp.password,\n    onChange: handleSignUpChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 15\n    }\n  }), msg4 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 23\n    }\n  }, \"Password \", msg4) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Create\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 15\n    }\n  })))));\n};\n\nexport default CreateUser;","map":{"version":3,"sources":["/home/niko/Desktop/Mern/mern-stack/src/components/routes/CreateUser.js"],"names":["React","useState","useContext","useEffect","axios","AppContext","useHistory","CreateUser","history","error","displayError","one","two","three","four","msg1","dmsg1","msg2","dmsg2","msg3","dmsg3","msg4","dmsg4","context","setContext","validation","setValidation","signUp","setSignUp","firstname","lastname","email","password","toggleSignUp","setToggleSignUp","toggleSignIn","setToggleSignIn","signIn","setSignIn","handleSignUpChange","e","name","value","target","handleSignUpubmit","preventDefault","toLowerCase","flag","length","counter1","i","Number","counter2","counter3","counter4","includes","counter5","counter6","user","push","post","then","res","console","log","data","handleSignInChange","get","handleSignInSubmit","userLogged","isLogged","width","margin"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport axios from \"../../../client/node_modules/axios\";\nimport { AppContext } from \"../../AppContext\";\nimport { useHistory } from \"react-router-dom\";\n\nconst CreateUser = () => {\n  let history = useHistory();\n\n  const [error, displayError] = useState({\n    one: false,\n    two: false,\n    three: false,\n    four: false,\n  });\n  const [msg1, dmsg1] = useState(\"\");\n  const [msg2, dmsg2] = useState(\"\");\n  const [msg3, dmsg3] = useState(\"\");\n  const [msg4, dmsg4] = useState(\"\");\n\n  const { context, setContext } = useContext(AppContext);\n  const [validation, setValidation] = useState([]);\n  const [signUp, setSignUp] = useState({\n    firstname: \"\",\n    lastname: \"\",\n    email: \"\",\n    password: \"\",\n  });\n  const [toggleSignUp, setToggleSignUp] = useState(false);\n  const [toggleSignIn, setToggleSignIn] = useState(true);\n  const [signIn, setSignIn] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleSignUpChange = (e) => {\n    const { name, value } = e.target;\n    setSignUp({\n      ...signUp,\n      [name]: value,\n    });\n    dmsg1(\"\");\n    dmsg2(\"\");\n    dmsg3(\"\");\n    dmsg4(\"\");\n  };\n\n  const handleSignUpubmit = (e) => {\n    e.preventDefault();\n    \n    const firstname = signUp.firstname.toLowerCase();\n    const lastname = signUp.lastname.toLowerCase();\n    const email = signUp.email;\n    const password = signUp.password;\n    let flag = true;\n    // check first name\n    if (\n      firstname.length < 3 ||\n      firstname.length === \"\" ||\n      firstname.length > 12\n    ) {\n      dmsg1(\"is not valid.\");\n      flag = false;\n    }\n    if (firstname) {\n      let counter1 = 0;\n      for (let i = 0; i < firstname.length; i++) {\n        if (Number(`${firstname[i]}`)) {\n          counter1++;\n        }\n      }\n      if (counter1 > 0) {\n        dmsg1(\"cannot contain a number.\");\n        flag = false;\n      }\n    }\n    // check last name\n    if (lastname.length < 3 || lastname.length === \"\" || lastname.length > 12) {\n      dmsg2(\"is not valid.\");\n    }\n    if (lastname) {\n      let counter2 = 0;\n      for (let i = 0; i < lastname.length; i++) {\n        if (Number(`${lastname[i]}`)) {\n          counter2++;\n        }\n      }\n      if (counter2 > 0) {\n        dmsg2(\"cannot contain a number.\");\n        flag = false;\n      }\n    }\n    // check email\n    if (email.length < 10 || email.length === \"\" || email.length > 25) {\n      dmsg3(\"is not valid.\");\n    }\n    if (email) {\n      let counter3 = 0;\n      let counter4 = 0;\n      if (!email.includes(\"@\")) {\n        counter3++;\n      }\n      if (!email.includes(\".\")) {\n        counter4++;\n      }\n      if (counter3 > 0) {\n        dmsg3(\"is missing ('@').\");\n        flag = false;\n      }\n      if (counter4 > 0) {\n        dmsg3(\"is missing ('.').\");\n        flag = false;\n      }\n    }\n    // check password\n    if (password.length < 6 || password.length === \"\" || password.length > 20) {\n      dmsg4(\"is not valid.\");\n      flag = false;\n    }\n    if (password) {\n      let counter5 = 0;\n      let counter6 = 0;\n      for (let i = 0; i < password.length; i++) {\n        if (Number(`${password[i]}`)) {\n          counter5++;\n        }\n        if (password.includes(\" \")) {\n          counter6++;\n        }\n      }\n      if (counter5 === 0) {\n        dmsg4(\"must contain at least one number.\");\n        flag = false;\n      }\n      if (counter6 > 0) {\n        dmsg4(\"can not contain an empty space\");\n        flag = false;\n      }\n    }\n    if (flag === true) {\n      const user = {\n        firstname,\n        lastname,\n        email,\n        password,\n      };\n      setToggleSignIn(true)\n      setToggleSignUp(false)\n      history.push('/')\n      axios\n        .post(\"http://localhost:5000/users/add\", user)\n        .then((res) => console.log(res.data));\n      return setSignUp({\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        password: \"\",\n      });\n     \n    }\n  };\n  const handleSignInChange = (e) => {\n    displayError(false);\n    const { name, value } = e.target;\n    setSignIn({\n      ...signIn,\n      [name]: value,\n    });\n  };\n\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/users/\").then((res) => {\n      setValidation(res.data)\n      console.log(res.data);\n    });\n    return () => {\n      console.log(\"cleared user list\");\n    };\n  }, []);\n  const handleSignInSubmit = (e) => {\n    e.preventDefault();\n   \n    const email = signIn.email;\n    const password = signIn.password;\n  \n  for(let i = 0; i < validation.length; i++){\n    if (\n      validation[i].email === email &&\n      validation[i].password === password\n    ) {\n      displayError(false);\n      setContext({\n        userLogged: validation[i].firstname,\n        isLogged: true,\n      });\n      history.push(\"/\");\n      setSignIn({\n        email: \"\",\n        password: \"\",\n      });\n     break;\n    } else {\n      displayError(true);\n    }\n  }\n      \n  };\n  return (\n    <React.Fragment>\n      {toggleSignIn && (\n        <div style={{ width: \"70%\", margin: \"auto\" }}>\n          <p>\n            New user{\" \"}\n            <button\n              className=\"btn btn-sm btn-outline-success\"\n              onClick={() => {\n                setToggleSignIn(false);\n                setToggleSignUp(true);\n              }}\n            >\n              Sign up\n            </button>{\" \"}\n            now and enjoy Extremely's exercise tracker.\n          </p>\n\n          <h3>Sign in</h3>\n\n          <form onSubmit={handleSignInSubmit} noValidate>\n            <div className=\"form-group\">\n              Email:\n              <input\n                type=\"email\"\n                name=\"email\"\n                className=\"form-control\"\n                value={signIn.email}\n                onChange={handleSignInChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              Password:\n              <input\n                type=\"password\"\n                name=\"password\"\n                className=\"form-control\"\n                value={signIn.password}\n                onChange={handleSignInChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              <input type=\"submit\" value=\"Create\" className=\"btn btn-primary\" />\n            </div>\n          </form>\n        </div>\n      )}\n      {toggleSignUp && (\n        <div style={{ width: \"70%\", margin: \"auto\" }}>\n          <p>\n            Already a user just{\" \"}\n            <button\n              className=\"btn btn-sm btn-outline-warning\"\n              onClick={() => {\n                setToggleSignIn(true);\n                setToggleSignUp(false);\n              }}\n            >\n              Sign in\n            </button>{\" \"}\n            now and enjoy Extremely's exercise tracker.\n          </p>\n\n          <h3>Create New User</h3>\n\n          <form onSubmit={handleSignUpubmit} noValidate>\n            <div className=\"form-group\">\n              Firstname:\n              <input\n                type=\"text\"\n                name=\"firstname\"\n                className=\"form-control\"\n                value={signUp.firstname}\n                onChange={handleSignUpChange}\n              />\n              {msg1 ? <p className=\"text-danger\">Firstname {msg1}</p> : \"\"}\n            </div>\n            <div className=\"form-group\">\n              Lastname:\n              <input\n                type=\"text\"\n                name=\"lastname\"\n                className=\"form-control\"\n                value={signUp.lastname}\n                onChange={handleSignUpChange}\n              />\n              {msg2 ? <p className=\"text-danger\">Lastname {msg2}</p> : \"\"}\n            </div>\n            <div className=\"form-group\">\n              Email:\n              <input\n                type=\"email\"\n                name=\"email\"\n                className=\"form-control\"\n                value={signUp.email}\n                onChange={handleSignUpChange}\n              />\n              {msg3 ? <p className=\"text-danger\">Email {msg3}</p> : \"\"}\n            </div>\n            <div className=\"form-group\">\n              Password:\n              <input\n                type=\"password\"\n                name=\"password\"\n                className=\"form-control\"\n                value={signUp.password}\n                onChange={handleSignUpChange}\n              />\n              {msg4 ? <p className=\"text-danger\">Password {msg4}</p> : \"\"}\n            </div>\n            <div className=\"form-group\">\n              <input type=\"submit\" value=\"Create\" className=\"btn btn-primary\" />\n            </div>\n          </form>\n        </div>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default CreateUser;\n"]},"metadata":{},"sourceType":"module"}